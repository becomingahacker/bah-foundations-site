<!DOCTYPE html>
<!-- saved from url=(0042)http://opflex.ciscolive.com/pod1/basics/os -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="cache-control" content="max-age=0">
            <meta http-equiv="cache-control" content="no-cache">
            <meta http-equiv="expires" content="0">
            <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
            <meta http-equiv="pragma" content="no-cache">
            <link href="./os_files/bootstrap.min.css" rel="stylesheet" media="screen">
            <link href="./os_files/github.css" rel="stylesheet">
            <link href="./os_files/cerulean.css" rel="stylesheet">
            <link href="./os_files/whitebackgroundmenu.css" rel="stylesheet">
            <link rel="stylesheet" href="./os_files/font-awesome.min.css">
            <link href="./os_files/style.css" rel="stylesheet">
            <link href="./os_files/cssterm.css" rel="stylesheet">
            <link href="./os_files/bootstrap-select.min.css" rel="stylesheet">
</head>
<body>
    

	<div class="container">
		<nav class="navbar navbar-default navbar-fixed-top" id="ltraci-navbar" role="navigation">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
                
			        <a href="http://opflex.ciscolive.com/pod1" class="navbar-brand"><div class="pn-noncollapse">OpenStack Lab</div></a>
                
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar navbar-inverse"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		    </div>
		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">
          
              
		        <li class="dropdown">
		          <a href="http://opflex.ciscolive.com/pod1/basics/os#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Menu<span class="caret"></span></a>
		          <ul class="dropdown-menu multi-column columns-3" role="menu" style="font-size:.7em;">
			          <div class="row">
				          <div class="col-sm-3">
					          <ul class="multi-column-dropdown">
								  
									  
										<li class="dropdown-header">Operating System</li>
									  
								  
									  
										  <li>
                                             <a href="http://opflex.ciscolive.com/pod1/basics/os">Step1: OS Basics</a>
                                                
                                          </li>
									  
								  
									  
										  <li>
                                             <a href="http://opflex.ciscolive.com/pod1/basics/lldp">Step2: LLDP Daemon</a>
                                                
                                          </li>
									  
								  
									  
										  <li>
                                             <a href="http://opflex.ciscolive.com/pod1/basics/uplinks">Step3: Host Uplinks</a>
                                                
                                          </li>
									  
								  
									  
										  <li>
                                             <a href="http://opflex.ciscolive.com/pod1/basics/horizon">Step4: Horizon</a>
                                                
                                          </li>
									  
								  
								  
                                  
                              </ul>
				          </div>
				          <div class="col-sm-3">
                              <ul class="multi-column-dropdown">
                                  
									  
										<li class="dropdown-header">ML2 OpFlex Integration</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/opflex-pkgs">Step5: ML2 Packages</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/neutron-aci">Step6: ML2 Config</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/neutron-ports">Step7: ACI Ports</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/neutron-extl3">Step8: External L3</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/opflexint">Step9: Opflex Interface</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex/opflex-cfg">Step10: Agent Config</a>
                                          
                                          </li>
									  
								  
								  
									  
										<li class="dropdown-header">OpenStack ML2</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/float-ip-ml2">Step11: Float IP Net</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/internal-net-ml2">Step12: Internal Networks</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/instance-ml2">Step13: Create Instances</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/inst-net-ml2">Step14: Instance Networks</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/ext-net-ml2">Step15: External Networks</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/openflow-ml2">Step16: OpenFlow ML2</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-ml2/ml2-apic">Step17: View APIC Config</a>
                                          
                                          </li>
									  
								  
					          </ul>
                              <ul class="multi-column-dropdown">
                                  
									  
										<li class="dropdown-header">Reset Openstack Config</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/wipe/wipe-ml2">Step18: Clean Project</a>
                                          
                                          </li>
									  
								  
                              </ul>
				          </div>
                          <div class="col-sm-3">

                              <ul class="multi-column-dropdown">
								  
									  
										<li class="dropdown-header">GBP OpFlex Integration</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/gbp-intro">Step19: GBP Intro</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/opflex-pkgs-gbp">Step20: GBP Packages</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/neutron-aci-gbp">Step21: GBP Config</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/gbp-neutron-ports">Step22: ACI Ports</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/gbp-neutron-extl3">Step23: External L3</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/gbp-opflexint">Step24: Opflex Interface</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/opflex-gbp/gbp-opflex-cfg">Step25: Agent Config</a>
                                          
                                          </li>
									  
								  
                                  
									  
										<li class="dropdown-header">Openstack GBP</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-policy-grp">Step26: Policy Groups</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-app-pol">Step27: Create App Policies</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-apply-pol">Step28: Apply App Policies</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-opflex-ext">Step29: External Networks</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-grp-members">Step30: Group Members</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-int-nets">Step31: Internal Networks</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-opflex-fip">Step32: Floating IP</a>
                                              
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/os-gbp/gbp-apic">Step33: View APIC config</a>
                                              
                                          </li>
									  
								  
								  
					          </ul>
                          </div>
				          <div class="col-sm-3">
                              <ul class="multi-column-dropdown">
								  
									  
										<li class="dropdown-header">Openstack NFP</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-intro">Step35: NFP Intro</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-pkgs">Step36: NFP Packages</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-orch">Step37: NFP Orchestrator</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-cloud_comp">Step38: NFP Cloud Comp</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-proxy">Step39: NFP Proxy</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-validate">Step40: NFP Validate</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/nfp/nfp-nsd">Step41: OneC NSD</a>
                                          
                                          </li>
									  
								  
                              <ul class="multi-column-dropdown">
 								  
									  
										<li class="dropdown-header">Appendix</li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/appendix/cloud_img">Step91: Cloud Image</a>
                                          
                                          </li>
									  
								  
									  
										  <li>
                                              <a href="http://opflex.ciscolive.com/pod1/appendix/finish">Step92: Finish</a>
                                          
                                          </li>
									  
								  
					          </ul>
				          </ul></div>
			          </div>
		          </ul>
		        </li>
              
              
				<li class="ciscoliveitem"><a target="blank" href="http://opflex.ciscolive.com/pod1/print">Print</a></li>
				<li class="ciscoliveitem"><a target="blank" href="http://opflex.ciscolive.com/static/images/LTRACI-2225.pdf">Lab Preso</a></li>
				<li class="ciscoliveitem"><a target="blank" data-toggle="modal" data-target="#ABOUT" href="http://opflex.ciscolive.com/pod1/basics/os#">About</a></li>
              
		      </ul>
		      <ul class="nav navbar-nav navbar-right navHeaderCollapse">
					<a href="http://opflex.ciscolive.com/"><img height="42px" style="margin: 2px 10px;" src="./os_files/cisco-live-white.png"></a>
                    
                        <a href="http://opflex.ciscolive.com/extract/pod1/basics/os" target="_blank">
						    <span style="margin:5px 10px 0px 0px; font-size:.6em; color:white;" class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
                        </a>
                    
		      </ul>
		    </div><!-- /.navbar-collapse  width="30px" -->
		  </div><!-- /.container-fluid -->
		</nav>
		</div>


<div class="modal fade" id="ABOUT" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <h3 class="modal-title" id="myModalLabel">OpenStack OpFlex Lab</h3>
      </div>
      <div class="modal-body">
		<div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <img src="./os_files/OpenStack-logo.png" class="img-responsive">
            </div>
            <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                <p>
                    The purpose of this lab is to provide the student a better understanding of the Cisco ACI OpenStack
                    integration. This new integration utilizng OpFlex technology provides for better scaling and
                    functionality of OpenStack by leveraging the advantages of the ACI fabric to provide
                    multi-tenant networks that scale into the millions.
                </p>
                <p>
                    ACI provides advanced telemetry of networks by keeping a marriage of the underlay and the overlay
                    applications that use it. The new OpFlex integration provides a view of the telemetry of the
                    OpenStack compute environments into the ACI infrastructure. This provides the ability to
                    optimize operational efficiencies that are required for the agile networks of tomorrow.
                </p>
            </div>
        </div>
        <div class="row">
            <p>
                This lab uses real physical equipment for both OpenStack and ACI enhancing the experience of
                how the integration works. Focused on both APIC/ML2 and the GBP integration models, the student
                will see the differences between both models and how these integrate into ACI. This also highlights
                how the GBP (group based policy) model benefits the DEV-OPS operational model by simplifying
                the network for the application developer interacting with OpenStack.
            </p>
        </div>
		<div class="row" style="margin-top:20px;">
			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
				<strong>Rafael Muller</strong><br>
                Principal Engineer<br>
				rmuller@cisco.com<br>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
				<strong>Luis Flores</strong><br>
                System Enginer Sales<br>
				luflores@cisco.com<br>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
				<strong>Cesar Obediente</strong><br>
                Principal Engineer<br>
				cobedien@cisco.com<br>
			</div>
		</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
		
		<!-- <div class="container"> -->
			<!-- <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> -->
				


<div class="container">
<h1>Configure base Operating System on Controller</h1>
    <p>As with any Linux application installation, there are some operating system parameters that need to be modified
    to facilitate the operation of your application.  Adjustments to the firewall and NTP are required for an
    operational OpenStack deployment. We have grouped the requirements ahead of each component installation of
    OpenStack.</p>
<h2>Use of RedHat Enterprise Linux for this lab</h2>
    <p>RedHat Enterprise Linux (RHEL) is the preferred distribution of many Enterprise
    accounts. That being said, OpenStack can be installed on many different Linux distributions, including Canonical's
    Ubuntu. Please refer to Cisco's documentation for instructions on how to integrate with other Cisco products
        leveraging their respectives plugins at
    <a href="http://www.cisco.com/go/openstack">http://www.cisco.com/go/openstack</a></p>
<div class="clearfix"></div>
<!--
########################################################################################################################
Step 
########################################################################################################################
-->
<p>In this lab, you will have access to one UCS-C220 host to run OpenStack. This node will run the OpenStack
    Controller, the Openstack Compute and the Openstack Network in the same UCS-C220. This will allow us to take the
    All-In-One (AIO) approach. It is important to note that in a production environment, you
    will have many compute nodes on which you will be running your OpenStack instances (vm's). Plus dedicated nodes
    for different Openstack functions. </p>

<p>Perform OS modifications on your AIO Node by connecting to <b>pod01-compute1 </b> in PuTTY
    Connection Manager.</p>

<h3>Step 1 - Configure NTP for proper time synchronization</h3>
<p>In OpenStack it is <strong>critical</strong> to have proper time synchronization across each of the component hosts.
    In RHEL the default time protocol is called Chrony. Chrony is a variation of the NTPd engine of linux that is
    designed for dis-association of NTP resources ( for example laptops that lose access to their network clocks ).
    In your OpenStack environment you can run either Chrony or NTPd as needed. For the purpose of this lab we will
    be using chrony and it has been pre-configured for you.</p>



    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        1
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-1">Copy</button>
    </div>
<div class="ciscohl2" id="copy-1" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<pre># This is the copy group: 1<br>

<code>
systemctl status chronyd
</code>

</pre>
</div>
</div>




    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>

<div class="commandblock">
<div class="">
<pre><strong>pod01-compute1#</strong> systemctl status chronyd
chronyd.service - NTP client/server
   Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled)
   Active: <b><span style="color:green">active (running)</span> </b> since Mon 2015-10-12 11:20:09 EDT; 59s ago
  Process: 25969 ExecStartPost=/usr/libexec/chrony-helper add-dhclient-servers (code=exited, status=0/SUCCESS)
  Process: 25966 ExecStart=/usr/sbin/chronyd -u chrony $OPTIONS (code=exited, status=0/SUCCESS)
 Main PID: 25968 (chronyd)
   CGroup: /system.slice/chronyd.service
           └─25968 /usr/sbin/chronyd -u chrony

Oct 12 11:20:09 devpod1-openstack-controller.cisco.com systemd[1]: Starting NTP client/server...
Oct 12 11:20:09 devpod1-openstack-controller.cisco.com chronyd[25968]: chronyd version 1.29.1 starting
Oct 12 11:20:09 devpod1-openstack-controller.cisco.com chronyd[25968]: Linux kernel major=3 minor=10 patch=0
Oct 12 11:20:09 devpod1-openstack-controller.cisco.com chronyd[25968]: hz=100 shift_hz=7 freq_scale=1.00000000 nominal_tick=1...l=2
Oct 12 11:20:09 devpod1-openstack-controller.cisco.com chronyd[25968]: Frequency -78.309 +/- 0.032 ppm read from /var/lib/chr...ift
Oct 12 11:20:09 devpod1-openstack-controller.cisco.com systemd[1]: Started NTP client/server.
Oct 12 11:20:14 devpod1-openstack-controller.cisco.com chronyd[25968]: Selected source 172.18.106.1
Hint: Some lines were ellipsized, use -l to show in full.
</pre>
</div>
</div>


<p>To get the information on the status of what chrony tracking, use <code>chronyc tracking</code>.</p>



    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        2
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-2">Copy</button>
    </div>
<div class="ciscohl2" id="copy-2">
<pre># This is the copy group: 2<br>

<code>
chronyc tracking
</code>

</pre>
</div>
</div>



    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>

<div class="commandblock">
<div class="">
<pre># chronyc tracking
Reference ID    : 10.0.236.10 (ntp-vlan336.ecatsrtpdmz.cisco.com)
Stratum         : 3
Ref time (UTC)  : Tue Jan  6 14:42:10 2015
System time     : 93476.671875000 seconds slow of NTP time
Last offset     : -0.000186148 seconds
RMS offset      : 3119.961914062 seconds
Frequency       : 48.261 ppm fast
Residual freq   : -0.011 ppm
Skew            : 8.250 ppm
Root delay      : 0.020065 seconds
Root dispersion : 0.023922 seconds
Update interval : 479.2 seconds
Leap status     : Normal
</pre>
</div>
</div>

<!--
##############################################################################################################################
Step 
##############################################################################################################################
-->
<h3>Step 2 - Configure HOSTS file for Name Resolution</h3>
<p>Setting proper hostnames definition plays a key role in the setup of various components of OpenStack ( in particular
    RabbitMQ - RabiitMQ will be discussed in the upcoming chapter). There are three things that need to match for
    RabbitMQ to properly operate. The first part is that the hostname is correct in the file /etc/hosts. The second is
    the environment variable HOSTNAME that is derived in the system. The third is the hostname definition in
    /etc/hostname. </p>



    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        3
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-3">Copy</button>
    </div>
<div class="ciscohl2" id="copy-3" style="background-color: #e0ffcb;">
<pre># This is the copy group: 3<br>

<code>
cat &lt;&lt;EOF &gt; /etc/hosts
127.0.0.1   localhost localhost.localdomain
10.0.236.101  pod01-compute1 pod01-compute1.ecatsrtpdmz.cisco.com
EOF
</code>

</pre>
</div>
</div>




    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        4
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-4">Copy</button>
    </div>
<div class="ciscohl2" id="copy-4">
<pre># This is the copy group: 4<br>

<code>
cat &lt;&lt;EOF &gt; /etc/hostname
pod01-compute1
EOF
</code>

</pre>
</div>
</div>


<!--
##############################################################################################################################
Step 
##############################################################################################################################
-->
<h3>Step 3 - Disable Network Manager Service and enable network</h3>



    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        5
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-5">Copy</button>
    </div>
<div class="ciscohl2" id="copy-5" style="background-color: #e0ffcb;">
<pre># This is the copy group: 5<br>

<code>
systemctl disable NetworkManager.service
systemctl stop NetworkManager.service
systemctl mask NetworkManager.service



chkconfig network on
systemctl restart network
</code>

</pre>
</div>
</div>



<!--
##############################################################################################################################
Step 
##############################################################################################################################
-->
<h3>Step 4 - Install OpenStack and OpenStack Utilities</h3>
    <p>
        For this lab we have setup a local repository with all the appropriate packages related to RedHat enterprise
        Linux snapshot to specific package versions. This insures that the lab has consistent results since the upstream
        code base is the same. In your production environment you will always want to create a repository and install
        from the same base code to insure consistency when installing different compute hosts over time. We will
        show more details on the package details for you in another chapter including inserting the Cisco OpFLex
        packages into the repository to be able to install them automatically.
    </p>


    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        6
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-6">Copy</button>
    </div>
<div class="ciscohl2" id="copy-6">
<pre># This is the copy group: 6<br>

<code>
yum -y install openstack-selinux openstack-utils
</code>

</pre>
</div>
</div>


<!--
##############################################################################################################################
Step 
##############################################################################################################################
-->
<h3>Step 5- Upgrade system packages</h3>
    <p>
        Upgrade all the packages from the original ISO PXEBOOT install disk.
    </p>


    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        7
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-7">Copy</button>
    </div>
<div class="ciscohl2" id="copy-7">
<pre># This is the copy group: 7<br>

<code>
yum makecache
yum -y upgrade
</code>

</pre>
</div>
</div>


<!--
########################################################################################################################
Step 
########################################################################################################################
-->

<h3>Step 6 - Create OpenStack client environment scripts</h3>
<p> OpenStack supports simple client environment scripts also known as OpenRC files. These scripts typically contain
    common options for all clients,  but also support unique options.</p>
<p>Create client environment scripts for the admin projects. Future portions of this guide
    reference these scripts to load appropriate credentials for client operations.</p>


    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        8
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-8">Copy</button>
    </div>
<div class="ciscohl2" id="copy-8">
<pre># This is the copy group: 8<br>

<code>
cd ~
cat &lt;&lt; EOF &gt; admin.sh
export OS_REGION_NAME=RegionOne
export OS_PROJECT_DOMAIN_ID=default
export OS_USER_DOMAIN_ID=default
export OS_PROJECT_NAME=admin
export OS_TENANT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=cisco.123
export OS_AUTH_URL=http://10.0.236.101:35357/v3
export OS_NOVA_AUTH=http://10.0.236.101:5000/v2.0
export PS1='[\u@\h \W(openstack_admin)]# '
EOF
chmod +x admin.sh
</code>

</pre>
</div>
</div>



<!--
########################################################################################################################
Step 
########################################################################################################################
-->
<h3>Step 7 - Verify identity shell</h3>
<p>You can validate that each shell is working properly by executing the shell command via the <code>#source</code>
    command.</p>


    <div class="topbar">
        <div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Controller/Compute POD1</div>
        <div class="topbarbutton"></div>
    </div>


<div class="commandblock">
    <div class="copyseqnumber">
        9
        <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-9">Copy</button>
    </div>
<div class="ciscohl2" id="copy-9">
<pre># This is the copy group: 9<br>

<code>
cd ~; source admin.sh
</code>

</pre>
</div>
</div>




<div class="nextsection">
    <div style="float:left; font-size: .9em;">
        
    </div>
    <div style="float:right; font-size: .9em;">
        
            <div class="btn-group">
                <button type="button" class="btn btn-md btn-success" onclick="window.location.href=&#39;/pod1/basics/lldp&#39;">Next: LLDP Daemon</button>
                <button type="button" class="btn btn-md btn-success" onclick="window.location.href=&#39;/pod1/basics/lldp&#39;">
                        <span class="glyphicon glyphicon-chevron-right" style="color:white;" aria-hidden="true"></span>
                </button>
            </div>
       
    </div>
</div>

</div><!-- Whole page container -->

			<!-- </div> -->
    	<!--- </div> -->
        <span style="font-size:.7em; color:0x696969; float:right;margin:30px 20px 0px 0px;">© Copyright Cisco Systems 2017</span>
  


<script src="./os_files/jquery.min.js"></script>
<script src="./os_files/bootstrap.min.js"></script>
<!-- <script src="/static/js/ZeroClipboard.js" type="text/javascript"></script> -->
<script src="./os_files/highlight.pack.js"></script>
<script type="text/javascript" src="./os_files/sijax.js"></script>
<script type="text/javascript" src="./os_files/cssterm.js"></script>
<script type="text/javascript" src="./os_files/clipboard.min.js"></script>
<script type="text/javascript" src="./os_files/bootstrap-select.min.js"></script>
<script type="text/javascript">
    Sijax.setRequestUri("/pod1/basics/os");Sijax.setJsonUri("/static/js/sijax/json2.js");
</script>


<script type="text/javascript">
var urlParams;
(window.onpopstate = function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})();

// Config ZeroClipboard
//ZeroClipboard.config({
//    hoverClass: 'btn-clipboard-hover'
//})

// Insert copy to clipboard button before .ciscohl
//$('.ciscohl').each(function () {
//    var btnHtml = '<div class="zero-clipboard"><span class="btn-clipboard">Copy</span></div>';
//    $(this).before(btnHtml)
//});

function runit(codeid){
    var codeblock = "codeblock-" + codeid;
    var preblock =  "output-" + codeid;
    var outfixhtmlfunc = 'outputfixhtml' + codeid;
    var code = document.getElementById(codeblock).value;
	document.getElementById(preblock).innerHTML = '';
    Sk.configure({output:eval(outfixhtmlfunc) });
    eval(Sk.importMainWithBody("<stdin>", false, code));
}





//var zeroClipboard = new ZeroClipboard($('.btn-clipboard'));
//var htmlBridge = $('#global-zeroclipboard-html-bridge');
//
//// Handlers for ZeroClipboard
//zeroClipboard.on('ready', function (event) {
//    htmlBridge
//        .data('placement', 'top')
//        .attr('title', 'Copy to clipboard')
//        .tooltip();
//    var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
//    console.log(ciscohl);
//
//    // Copy to clipboard
//    zeroClipboard.on('copy', function (event) {
//        var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
//        console.log ( ciscohl[0].id );
//        var pod = urlParams["pod"];
//        var section = urlParams["section"];
//
//        $.ajax({
//	       //type: "GET",
//	       url: "/dash/collect/pod/1/basics/os/" + ciscohl[0].id
//	       // data:  "pod=" + pod + "&section=" + section + "&step=" + ciscohl[0].id
//        });
//        event.clipboardData.setData("text/plain", ciscohl.text());
//         // $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat top left / 45px 45px")
//         $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")
//    });
//
//    // Notify copy success and reset tooltip title
//    zeroClipboard.on('aftercopy', function () {
//        htmlBridge
//            .attr('title', 'Copied!')
//            .tooltip('fixTitle')
//            .tooltip('show')
//            .attr('title', 'Copy to clipboard')
//            .tooltip('fixTitle');
//
//    });
//});
//
//function findPos(obj) {
//    var curtop = 0;
//    if (obj.offsetParent) {
//        do {
//            curtop += obj.offsetTop;
//        } while (obj = obj.offsetParent);
//    return [curtop];
//    }
//}
//
//
//// Notify copy failure
//zeroClipboard.on('error', function () {
//    ZeroClipboard.destroy();
//    htmlBridge
//        .attr('title', 'Flash required')
//        .tooltip('fixTitle')
//        .tooltip('show');
//});
//

///////////////////////////////////////////////////////////////////////////////
// Start NEW COPY/PASTE Clipboard code.
///////////////////////////////////////////////////////////////////////////////

var clipboard = new Clipboard('.copybutton', {
    text: function(btn_object){
        var webcopy = $(btn_object).parent().nextAll('.ciscohl2').first();
        return webcopy[0].innerText + "\n\r";
    }
});
clipboard.on('success', function(e) {
    var webcopy = $(event.target).parent().nextAll('.ciscohl2').first();
    var pod = urlParams["pod"];
    var section = urlParams["section"];

    $.ajax({
        url: "/dash/collect/pod/1/basics/os/" + webcopy[0].id
    });
    $(event.target).parent().next(".ciscohl2").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")

    e.clearSelection();
});
///////////////////////////////////////////////////////////////////////////////
// End COPY/PASTE Clipboard code.
///////////////////////////////////////////////////////////////////////////////



$(document).ready(function(){
   // cache the window object
   $window = $(window);

    $('.selectpicker').selectpicker({
          style: 'btn-default',
          size: 12
      });

    




    // $('pre code').each(function(i, block) {
    //     hljs.highlightBlock(block);
    // });

   $('section[data-type="background"]').each(function(){
     // declare the variable to affect the defined data-type
     var $scroll = $(this);

      $(window).scroll(function() {
        // HTML5 proves useful for helping with creating JS functions!
        // also, negative value because we're scrolling upwards
        var yPos = -($window.scrollTop() / $scroll.data('speed'));

        // background position
        var coords = '50% '+ yPos + 'px';

        // move the background
        $scroll.css({ backgroundPosition: coords });
      }); // end window scroll
   });  // end section function
}); // close out script


</script>

<textarea readonly="" style="font-size: 12pt; border: 0px; padding: 0px; margin: 0px; position: absolute; left: -9999px; top: 0px;"></textarea></body></html>